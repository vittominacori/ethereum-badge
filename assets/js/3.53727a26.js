(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{155:function(e,t,a){"use strict";a(156)("link",function(e){return function(t){return e(this,"a","href",t)}})},156:function(e,t,a){var r=a(3),n=a(8),s=a(23),i=/"/g,o=function(e,t,a,r){var n=String(s(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(r).replace(i,"&quot;")+'"'),o+">"+n+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(o),r(r.P+r.F*n(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",a)}},162:function(e,t,a){"use strict";a.r(t);a(50),a(155),a(150);var r,n,s=a(151),i=a(51),o=a(152),d={name:"Badge",mixins:[i.a,o.a],props:{address:{type:String,default:""},internal:{type:Boolean,default:!1}},data:function(){return{loaded:!1,loading:!0,makingTransaction:!1,donation:"",badge:{address:"",balance:0,link:"",embed:"",qrcode:""},trx:{hash:"",link:""}}},mounted:function(){this.initDapp()},methods:{initDapp:(n=Object(s.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.network.current=this.network.list[this.network.default],e.prev=1,e.next=4,this.initWeb3(this.network.default,!0);case 4:return e.next=6,this.getAddress(this.address||this.getParam("address"));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0),document.location.href=this.$withBase("/");case 12:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return n.apply(this,arguments)}),getAddress:(r=Object(s.a)(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!1,!this.web3.isAddress(t)){e.next=10;break}return this.badge.address=t,e.next=5,this.generateQRCode(this.badge.address);case 5:this.badge.qrcode=e.sent,this.badge.link=window.location.origin+this.$withBase("/detail.html?address=".concat(this.badge.address)),this.badge.embed='<iframe src="'.concat(this.badge.link,'&embedded=1" style="border:none; overflow:hidden; width: 570px; max-width: 100%; height: 240px" scrolling="no" frameborder="0" allowTransparency="true"></iframe>'),this.web3.eth.getBalance(this.badge.address,function(e,t){e?console.log(e):a.badge.balance=parseFloat(a.web3.fromWei(t)).toFixed(4)}),this.loaded=!0;case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),sendDonation:function(){var e=this;this.$validator.validateAll().then(function(){var t=Object(s.a)(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}if(e.metamask.installed){t.next=4;break}return alert("Please verify that you have MetaMask installed and unlocked."),t.abrupt("return");case 4:if(e.metamask.netId===e.network.current.id){t.next=7;break}return alert("You are on the wrong Network. Please switch MetaMask on ".concat(e.network.current.name,".")),t.abrupt("return");case 7:try{ethereum.enable().then(function(t){e.makingTransaction=!0,e.web3.eth.sendTransaction({value:e.web3.toWei(e.donation,"ether"),from:t[0],to:e.badge.address},function(t,a){t?alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"):(e.trx.hash=a,e.trx.link=e.network.current.etherscanLink+"/tx/"+e.trx.hash),e.makingTransaction=!1})}).catch(function(e){console.log(e)})}catch(e){console.log(e),alert("Cannot connect. Please verify that you have MetaMask installed and unlocked.")}case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},shareBadge:function(){this.$refs.shareModal.show()}}},l=a(5),c=Object(l.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?[a("b-card",{attrs:{"bg-variant":"light"}},[a("ui--loader",{attrs:{loading:e.loading}})],1)]:e._e(),e._v(" "),e.loading||e.loaded?e._e():[a("b-card",{attrs:{"bg-variant":"light"}},[a("blockquote",[e._v("Some error occurred")]),e._v(" "),a("router-link",{attrs:{to:e.$withBase("create.html")}},[e._v("Try creating your badge")])],1)],e._v(" "),e.loaded?[a("b-card",{attrs:{"no-body":"","footer-class":"p-2"}},[a("b-media",[e.badge.address?a("b-img",{attrs:{slot:"aside","fluid-grow":"",src:e.badge.qrcode,alt:e.badge.address},slot:"aside"}):e._e(),e._v(" "),a("h4",{staticClass:"card-title my-3"},[e._v("Send ETH to the following address")]),e._v(" "),a("h6",{staticClass:"card-subtitle text-muted address"},[e._v(e._s(e.badge.address))]),e._v(" "),a("b-link",{staticClass:"text-muted",attrs:{href:this.network.current.etherscanLink+"/address/"+e.badge.address,target:"_blank"}},[a("small",[e._v("View on Etherscan")])]),e._v(" "),a("p",{staticClass:"lead"},[e._v("\n                    Current balance: "),a("b",[e._v(e._s(e.badge.balance)+" ETH")])])],1),e._v(" "),a("div",{staticClass:"text-center",attrs:{slot:"footer"},slot:"footer"},[e.trx.hash?a("small",[e._v("\n                    Your hash:\n                    "),a("b-link",{staticClass:"text-secondary",attrs:{href:e.trx.link,target:"_blank"}},[a("small",[e._v(e._s(e.trx.hash))])])],1):a("b-form",{on:{submit:function(t){return t.preventDefault(),e.sendDonation(t)}}},[a("b-input-group",[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,decimal:4,min_value:1e-4},expression:"{ required: true, decimal: 4, min_value: 0.0001 }"}],class:{"is-invalid":e.errors.has("yourDonation")},attrs:{id:"yourDonation",name:"yourDonation",placeholder:"Your donation",disabled:e.makingTransaction,"data-vv-as":"donation"},model:{value:e.donation,callback:function(t){e.donation="string"==typeof t?t.trim():t},expression:"donation"}}),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{disabled:e.makingTransaction,type:"submit",variant:"outline-info"}},[e._v("\n                                Send\n                            ")])],1)],1),e._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("yourDonation"),expression:"errors.has('yourDonation')"}],staticClass:"text-danger"},[e._v("\n                        "+e._s(e.errors.first("yourDonation"))+"\n                    ")])],1)],1)],1),e._v(" "),a("b-modal",{ref:"shareModal",attrs:{"hide-footer":"",title:"Share your badge"}},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-form-group",{attrs:{label:"Share link","label-for":"badgeLink"}},[a("b-form-input",{attrs:{id:"badgeLink",name:"badgeLink",placeholder:"Your badge link",size:"lg",readonly:""},model:{value:e.badge.link,callback:function(t){e.$set(e.badge,"link","string"==typeof t?t.trim():t)},expression:"badge.link"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"12"}},[a("b-form-group",{attrs:{label:"Embed code","label-for":"badgeEmbed"}},[a("b-form-input",{attrs:{id:"badgeEmbed",name:"badgeEmbed",placeholder:"Your badge embed",size:"lg",readonly:""},model:{value:e.badge.embed,callback:function(t){e.$set(e.badge,"embed","string"==typeof t?t.trim():t)},expression:"badge.embed"}})],1)],1)],1)],1)]:e._e(),e._v(" "),e.loaded?a("div",{staticClass:"text-right p-0 pr-2"},[e.embedded&&!e.internal?a("b-link",{attrs:{href:e.$withBase("/"),target:"_blank"}},[a("small",{staticClass:"text-muted"},[e._v("Powered by ETHBadge")])]):a("b-link",{on:{click:e.shareBadge}},[a("small",{staticClass:"text-muted"},[e._v("Share or Embed")])])],1):e._e()],2)},[],!1,null,null,null);t.default=c.exports}}]);